---
modified: Sunday, August 24th 2025, 4:33:16 pm
---

# Appeal Prospect — MVP Description

**Appeal Prospect** is a lightweight demo web app that lets a user upload a court judgment and instantly receive a structured, 13-section legal analysis generated by **System Prompt v5.2**. It’s built on a **vanilla PHP + MySQL (LAMPP)** stack with simple login, per-user history, and a minimal admin dashboard. The goal is to showcase an end-to-end pipeline—from document ingest to AI-assisted analysis—without frameworks or heavy infrastructure.

## What it does

- **Upload or paste** a judgment (PDF → text via `pdftotext`, or raw text).
    
- **Analyze with v5.2** (OpenAI `gpt-4o-mini`) to produce a clear, sectioned output covering issues, grounds, remedies, procedure, ethics, constitutional angles, probability, and a layperson summary.
    
- **Optional web sources** via Perplexity (if API key is present); otherwise the app clearly indicates that live citations are not included in the demo.
    
- **Save & revisit** results under “My Cases”; **Admin** can review or delete any case.
    

## How it works (flow)

Login → Upload/Paste → Server extracts/normalizes text → App calls LLM with **System Prompt v5.2** → Result is stored and rendered → User/Admin can reopen from history.

## Tech & constraints

- **Stack:** PHP 8+, MySQL (UTF8MB4), Apache; no Composer; cURL for API calls.
    
- **Security (MVP):** Argon2id password hashing, session hardening, CSRF on sensitive actions, basic file-type/size checks, uploads not publicly exposed.
    
- **Scope:** Demo only—no vector database, no guaranteed citation verification, no auto-deletion policy (admin can delete).
    

## Who it’s for

A quick, tangible demonstration for attorneys, legal ops, or stakeholders evaluating AI-assisted judgment reviews—especially in a South African context (configurable)—before investing in a fuller production build.



---

---

# Concise PRD — “Appeal Prospect” MVP (LAMPP)

**Version:** 1.0  
**Date:** 24 Aug 2025  
**Owner:** John  
**Goal:** Demo an end-to-end flow where a user uploads a court judgment, the app analyzes it with **System Prompt v5.2**, and returns a structured result. Demo only (non-advisory).

---

## 1) Objectives & Success Criteria

- **Demonstrate** vanilla **PHP + MySQL** workflow with user login and per-user history.
    
- **Parse & analyze** a judgment (PDF or pasted text) via **System Prompt v5.2** using **OpenAI gpt-4o-mini**.
    
- **Optionally enrich** with minimal web research (Perplexity API) if a key is present; otherwise show “no live sources”.
    
- **Admin oversight:** simple dashboard for viewing/deleting cases.
    

**Success =** A logged-in user can upload/paste a judgment, receive a 13-section v5.2 analysis, and see it saved under “My Cases”. Admin can view/delete any case.

---

## 2) Users & Roles

- **End User**: Registers, logs in, uploads/pastes judgment, views results, revisits history.
    
- **Admin**: All End User actions + access to **/admin** (list all cases, open any result, delete cases).
    

---

## 3) In Scope (MVP)

- **Auth**: Register/Login/Logout (PHP sessions), password hashing **Argon2id**.
    
- **Upload/Parse**: PDF (via `pdftotext` if available) or pasted text.
    
- **LLM Analysis**: System Prompt v5.2 + OpenAI `gpt-4o-mini` (low cost/latency).
    
- **Minimal Web Research**: Perplexity API (optional; auto-skip if no key).
    
- **Storage/History**: Save analysis and show “My Cases”.
    
- **Admin Page**: Basic stats, list 200 latest cases, view any, delete.
    
- **Seed Script**: Creates **admin** and **demo** users (guarded by `SEED_KEY`).
    
- **Global Disclaimer**: “Demo only — not legal advice.”
    

**Out of Scope (MVP)**: Vector DB, citations verification pipeline, PDF export, rate limiting/queues, multi-tenant orgs, role granularity beyond admin/user, SSO, audits, full error observability.

---

## 4) User Stories

1. **Register/Login**: As a user, I can create an account and sign in so my cases are private.
    
2. **Upload/Analyze**: As a user, I can upload a PDF or paste text, run analysis via v5.2, and view a clean, sectioned result (1–13).
    
3. **History**: As a user, I can see a list of my prior cases and open results.
    
4. **Admin**: As an admin, I can see all cases, open any result, and delete inappropriate/test entries.
    

---

## 5) UX Flow

Landing → Login/Register → Upload/Paste → **Analyze** → Results (13 sections + optional sources) → **My Cases** (history).  
Admin: Login → **Admin Dashboard** → View/Delete.

---

## 6) Architecture (LAMPP)

- **PHP 8.1+**, **MySQL 8+** (UTF8MB4), Apache (or PHP built-in server for dev).
    
- **No Composer**. Use cURL for APIs. PDF parsing via system `pdftotext` (fallback: paste text).
    
- **OpenAI**: `gpt-4o-mini` via `/v1/chat/completions`.
    
- **Perplexity**: `/chat/completions` minimal prompt to fetch up to 5 URLs (optional).
    

**Pages**

- `/index.php` (home), `/login.php`, `/register.php`, `/logout.php`
    
- `/upload.php`, `<?= app_url('analyze.php') ?>`, `<?= app_url('results.php') ?>?id=…`, `<?= app_url('my-cases.php') ?>`
    
- `/admin.php` (admin only), `/seed.php?key=SEED_KEY` (delete after run)
    

---

## 7) Data Model (MySQL)

**users**

- `id` PK, `email` UNIQUE, `password_hash`, `name`, `is_admin` TINYINT(1), `created_at`, `last_login_at`
    

**cases**

- `id` PK, `user_id` FK → users, `case_name`, `original_filename`, `mime_type`,
    
- `judgment_text` LONGTEXT, `analysis_result` LONGTEXT, `citations` JSON NULL,
    
- `status` ENUM(queued|complete|error) DEFAULT `complete`, `token_in` INT NULL, `token_out` INT NULL, `created_at`
    

---

## 8) Prompting & Output

- **System**: Exact contents of **System Prompt v5.2** (stored under `app/prompts/…`).
    
- **User**: Judgment text (+ optional minimal citations block).
    
- **Expected Output**: 13 structured sections (as defined by v5.2) + brief “Layperson Summary”.
    

---

## 9) Security & Privacy (MVP)

- **Sessions**: `HttpOnly`, `SameSite=Lax`, `session_regenerate_id` on login.
    
- **Passwords**: `password_hash(..., PASSWORD_ARGON2ID)`.
    
- **CSRF**: Hidden token on POST forms (register, admin delete).
    
- **Uploads**: Size ≤ 10 MB; store PDFs outside public or deny direct access; MIME allowlist.
    
- **Admin Gate**: `require_admin()` on `/admin.php`.
    
- **Retention**: No auto-delete (demo only). Admin can delete cases.
    

---

## 10) Acceptance Criteria

- User can **register, login, logout**.
    
- User can **upload PDF or paste text** and receive a **13-section v5.2** analysis.
    
- **Results saved** and accessible under **My Cases**.
    
- If Perplexity key is set, **Web Sources** list appears; if not, show graceful fallback.
    
- **Admin page** accessible only by admin; can open any case and **delete**.
    
- Clear **disclaimer** visible on all primary pages.
    
- Errors (bad file type, empty content, API failure) show **friendly messages**.
    

---

## 11) Non-Functional

- **Performance**: Single call per analysis; acceptable demo latency (<~20s typical).
    
- **Reliability**: Fail soft with readable error; no worker/queue needed for MVP.
    
- **Maintainability**: Flat PHP files, minimal dependencies, clear separation (`app/`, `public/`).
    
- **Portability**: Runs on stock LAMPP.
    

---

## 12) Risks & Mitigations

- **PDF OCR**: Scanned PDFs may yield empty text → **mitigation**: allow paste text fallback.
    
- **API Keys**: Missing keys → **mitigation**: run without Perplexity; show fallback note.
    
- **Costs/Rate Limits**: Burst use → **mitigation**: keep `gpt-4o-mini`, add simple daily cap later if needed.
    
- **Security**: Seed script exposure → **mitigation**: protect with `SEED_KEY` and delete after use.
    

---

## 13) Delivery Artifacts

- LAMPP project folder with `public/`, `app/`, `uploads/`, `schema.sql`.
    
- Seed script `/seed.php?key=SEED_KEY` creating **admin** + **demo** users.
    
- System Prompt v5.2 file placed at `app/prompts/appeal_prospect_v5_2.md`.
    

---

## 14) Next Steps

- Configure `app/config.php` (DB creds, API keys, `SEED_KEY`), create DB from `schema.sql`, run `seed.php`, delete it.
    
- Optional: Add “Download original PDF” (auth-checked) and “Export result to .md/.txt”.


# Must Use

- Important! Bootstrap Based PHOENIX design, you must use HTML examples from the @phoenix.
- the @appeal_mvp_lampp_from_prd_example contains example integration.
